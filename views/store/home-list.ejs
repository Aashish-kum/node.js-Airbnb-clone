<%- include('../partials/head') %>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
  <%- include('../partials/nav') %>

  <main class="container mx-auto bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 sm:p-8 mt-10 max-w-6xl transition-colors duration-300 animate-fadeInUp">
    <h2 class="text-2xl sm:text-3xl text-red-500 font-bold text-center mb-6">
      Here are our registered homes:
    </h2>

    <!-- Responsive Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <% registeredHomes.forEach(home => { %>
        <div
          class="bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300 flex flex-col">
          
          <!-- Image -->
          <% if (isloggedIn) { %>
          <a href="/homes/<%= home._id %>">
          <% } %>
            <img src="<%= home.photo %>" 
                 alt="<%= home.houseName %>"
                 class="w-full h-52 object-cover transform hover:scale-105 transition duration-300" />
          <% if (isloggedIn) { %>
          </a>
          <% } %>

          <!-- Content -->
          <div class="p-4 flex flex-col flex-grow">
            <h3 class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2 truncate">
              <%= home.houseName %>
            </h3>
            <p class="text-gray-600 dark:text-gray-300 mb-2 flex items-center">
              <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>
              <%= home.location %>
            </p>

            <!-- Price + Rating -->
            <div class="flex justify-between items-center mb-4">
              <span class="text-base sm:text-lg font-bold text-red-500">
                Rs <%= home.price %> / night
              </span>
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                  viewBox="0 0 24 24" class="w-5 h-5 text-yellow-400 mr-1">
                  <path fill-rule="evenodd"
                    d="M10.788 3.21c.448-1.077 1.976-1.077 
                       2.424 0l2.082 5.007 5.404.433c1.164.093 
                       1.636 1.545.749 2.305l-4.117 3.527 
                       1.257 5.273c.271 1.136-.964 2.033-1.96 
                       1.425L12 18.354 7.373 21.18c-.996.608-2.231
                       -.29-1.96-1.425l1.257-5.273-4.117-3.527
                       c-.887-.76-.415-2.212.749-2.305l5.404-.433 
                       2.082-5.006z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-700 dark:text-gray-200"><%= home.rating %></span>
              </div>
            </div>

            <!-- Buttons -->
            <div class="mt-auto flex gap-3">
              <!-- Details Button -->
              <a href="/homes/<%= home._id %>" 
                 class="flex-1 inline-flex items-center justify-center px-4 py-2 rounded-full bg-blue-600 dark:bg-blue-700 text-white text-sm sm:text-base font-medium shadow-sm hover:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-300 transition">
                Details
              </a>

              <!-- Favorites Button -->
              <div class="flex-1">
                <%- include('../partials/favourites',{home : home}) %>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </main>
  <style>
      @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .animate-fadeInUp {
      animation: fadeInUp 0.2s ease-out forwards;
    }
  </style>

</body>
</html>
